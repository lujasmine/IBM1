<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>IBM1 - Manuals</title>

    <!-- Bootstrap Core CSS -->
    <link href="../css/bootstrap.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="../css/clean-blog.css" rel="stylesheet">

    <link href="../css/stylesheet.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='http://fonts.googleapis.com/css?family=Lato&subset=latin,latin-ext' rel='stylesheet' type='text/css'>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>

    <!-- Navigation -->
    <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>

                <a class="navbar-brand" href="../index.html">IBM1</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="../index.html">Home</a>
                    </li>
                    <li>
                        <a href="about.html">About</a>
                    </li>
                    <li class="dropdown">

                        <a class="dropdown-toggle" data-toggle="dropdown" href="#">Project
                        <span class="caret"></span></a>
                        <ul class="dropdown-menu">
                          <li><a href="requirements.html">Requirements</a></li>
                          <li><a href="research.html">Research</a></li>
                          <li><a href="ui.html">Prototype</a></li>
                          <li><a href="testing.html">Testing</a></li>
                        </ul>
                    </li>
                                        <li class="dropdown">
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#">Development
                        <span class="caret"></span></a>
                        <ul class="dropdown-menu">
                        <li><a href="overview.html">Overview</a></li>
                          <li><a href="ios.html">iOS</a></li>
                          <li><a href="web.html">Web Application</a></li>
                          <li><a href="manuals.html">Manuals</a></li>
                          <li><a href="further.html">Further Development</a></li>
                        </ul>
                    </li>
                     <li class="dropdown">
                        <a class="dropdown-toggle" data-toggle="dropdown" href="#">Prediction Engine
                        <span class="caret"></span></a>
                        <ul class="dropdown-menu">
                          <li><a href="pred.html">Prediction Algorithm</a></li>
                          <li><a href="algorithm.html">Algorithmic Implementation</a></li>
                          <li><a href="predictions_eval.html">Predictions Evaluation</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="project_management.html">Management</a>
                    </li>
                    <li>
                        <a href="http://ucl-esb.boards.net/" target="_blank">Forum</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

    <!-- Page Header -->
    <!-- Set your background image for this header on the line below. -->
    <header class="intro-header" style="background-image: url('../img/manuals.jpg')">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <div class="page-heading">
                        <h1>Manuals</h1>
                        <hr class="small">
                        <span class="subheading">System and User Manuals</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="row" id="ios">
            <h1>System Manual</h1>
            <h3>iOS (installed dependencies)</h3>
            <p>All external frameworks used in the iOS App (SwiftyJSON and Alamofire) were installed using Cocoapods. If any other frameworks are to be added, the Podfile will need to be edited, and then using terminal:</p>
            <code>pod install</code>
            <p>Import the frameworks to the required classes and in order to prevent any erros, go to Target -> Build Phases -> Link Binary With Libraries and add the pod installed frameworks.</p>
            <p>It is also important to use the .workspace file in Xcode rather than the .xcodeproj file.</p>
            <h3>PredictionIO PHP client SDK</h3>
            <p>The PredictionIO PHP client must be installed as a dependency, this has already been done, via Composer.</p>
            <p>Composer has created all the necessary files in the directory as well as a ‘vendor’ folder - this must not be deleted/edited, or the dependency will not work correctly.</p>
            <p>If additional PHP files are to be created to perform other queries to the prediction engine or event server, there is full documentation on the <a href="https://docs.prediction.io/appintegration/" target="_blank">website</a> and the following line must be added to the top of the PHP file to ensure that the dependency is added to the respective file:</p>
            <code>require_once(“vendor/autoload.php”);</code>
            <h1>User Manual</h1>
            <h3>iOS - Changing Login Options</h3>
            <p>Note: An active internet connection is required to use the app.</p>
            <h4>To enable/disable Fingerprint Login Option:</h4>
            <p>To use the fingerprint login option, Touch ID must be available on your device (iPhone 5S or newer) and it is enabled, with a fingerprint already set up.</p>
            <p>If you did not selected to enable Touch ID login furing the first time login and would like to change this setting, you can enable this option in the Settings app on your phone.</p>
            <p>Settings —>  E&S Banking —> Use Touch ID Login —> ON/OFF</p>
            <h4>To enable/disable Prediction Login Option:</h4>
            <p>The prediction engine requires two things to be enabled, firstly ‘Location Services’ must be turned on and the ‘Prediction Login’ option must be enabled.</p>
            <p>To turn on ‘Location Services’ for this app, go to Settings —> E&S Banking —> Location —> While Using the App (select).</p>
            <img src="../img/settings.jpg">
            <p>To enable Prediction Login, there are two ways:</p>
            <ul>
                <li>Logging in with the user for the first time on the device</li>
                <li>Go to Settings —> E&S Banking —> Use Prediction Login —> ON/OFF</li>
            </ul>
            <h1>Prediction Server User Manual</h1>
            <p>To start using the engine template we’ve developed, you first have to install the PredictionIO server. This can be done in one of two ways, depending on which one you are more comfortable with:</p>
            <h3>I. Install the server on your local machine</h3>
            <ol>
                <li>Issue
                <code>git clone -b engine-template https://github.com/lujasmine/IBM1/</code>
                in a folder at your convenience. 
                </li>
                <li>Then please navigate to https://github.com/lujasmine/IBM1/tree/engine-template and follow the instructions.</li>
            </ol>
            <p>Note: The Event server will be deployed at localhost:7070 and the prediction engine will be deployed at localhost:8000.</p>
            <h3>II. Install from the Docker image</h3>
            <ol>
                <li><p>Install Docker from <a href="https://www.docker.com">docker.com</a></p></li>
                <li><p>Start a docker terminal. </p></li>
                <li><p>Issue <code>docker run -P --name esb darianss/anomaly_detector</code>.</p></li>
                <li><p>The IP that docker runs on is the VM’s. We can get it with <code>docker-machine ip</code></p></li>
                <li><p>Issue <code>docker start -i -a esb</code> to start the container. </p></li>
                <p>Note: Starting the container will NOT work while connected to eduroam. </p>
                <p>Note 2: You can change files with the nano file editor.</p>
                <li><p>The ports of the container will not map out to the original ones. To get them we do: <code>docker port esb</code></p></li>
                <li><p>So in the end, the address of the Event server and of the deployed engine will look similar to 192.168.99.100:49155 (mapped from the container’s internal 0.0.0.0:7000). </p></li>
                <li><p>The entire server can be started by simply issuing, while inside the container: <code>./run.sh</code></p></li>
                <p>You now have your own containerised anomaly detector running on your local machine! </p>
            </ol>
            <h3>API</h3>
            <p>It is easy to send data to the event server via either HTTP requests or from multiple supported SDKs (available at <a href="https://docs.prediction.io/sdk/" target="_blank">https://docs.prediction.io/sdk/</a>). One such request made with curl will look like:</p>
            <pre><code>curl -i -X POST http://IP:PORT/events.json?accessKey=t9FmFxWIERJyaF3XGY8LwFsFSCHsRqbP5Wh0jyeCJzKBs3MjDkzaFRAIX4E7FR5r \
-H "Content-Type: application/json" \
-d '{
  "event" : "login",
  "entityType" : "user",
  "entityId" : "u0",
  "properties" : {
     "time" : 700,
     "day" : 4,
     "gpsLat" : 51.5247,
     "gpsLong" : -0.1342
   }
}’
            </code></pre>

            <p>Don’t forget to replace IP and PORT with your event server’s address. Feel free to replace the features in the properties section. </p>

<p>Queries can also be made via HTTP requests or SDKs. An example with curl will look like: </p>

<pre><code>curl -H "Content-Type: application/json" \
-d '{ "time": 730, "day": 4, "gpsLat": 51.52459, "gpsLong" : -0.13403 }' \
http://IP:PORT/queries.json
</code></pre>

<p>Where IP and PORT are placeholders. Time, day, gpsLat and gpsLong are also meant to be replaced. 
If -1 is received, then the login will not have been authenticated. If 1 is received, it is believed that the legitimate user is attempting to log in. </p>

<p>DO NOT FORGET TO RETRAIN AFTER ADDING NEW EXAMPLES! Depending on your installation, this is either done with the pio build - pio train - pio deploy sequence or just with ./run.sh . </p>

                <h3>Parameter tuning</h3>
                <p>The most important parameters of a one-class SVM are: </p>

<p>&#957; -  It sets the ratio of outliers to support vectors. It determines the trade-off between the outliers (unaccepted logins) and normal cases. 
It can be modified from engine.json which is in the root of the folder. </p>

<p>&#949; - The stopping tolerance, affects the number of iterations used when optimizing the model, and depends on the stopping criterion value. When the value is exceeded, the models stops iterating on the solution. 
It can be modified from engine.json which is in the root of the folder. </p>

                <h3>Database access</h3>
                <p>Troubleshooting: in case the db client won't connect or the console returns a jdbc error, it is because the maximum of 5 concurrent connections to it has been reached. To close everything down, either run <code>pio-stop</code> (in container) / stop the Event server (if the installation is local), or go online at: </p>

<p><a href="https://www.elephantsql.com" target="_blank">elephantsql.com</a></p>

<p>and login with: </p>

<pre style="border-color: red;"><code>email: team10@ucl.ac.uk
password: ibm1</code></pre>

<p>Press the connections button and terminate as many connections as needed. </p>


<p style="font-weight: bold;">You can also connect to the db using a client to manipulate the event data stored in the pio_event_1 table.</p>

<p>Its details are: </p>

<pre><code>URL: postgres://inpnwqsj:qbwIXuCH30WYLtIaTKVHYGgMtetFGlgF@horton.elephantsql.com:5432/inpnwqsj

Hostname: horton.elephantsql.com

Database name: inpnwqsj

Username: inpnwqsj

Password: qbwIXuCH30WYLtIaTKVHYGgMtetFGlgF</code></pre>
        </div>
    </div>

    <hr>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <ul class="list-inline text-center">
                        <li>
                            <a href="https://github.com/lujasmine/IBM1" target="_blank">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </footer>
    </footer>

    <!-- jQuery -->
    <script src="../js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="../js/bootstrap.min.js"></script>

    <!-- Custom Theme JavaScript -->
    <script src="../js/clean-blog.min.js"></script>

</body>

</html>
